<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TELOC Cell | SECR Raipur Division</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:"Segoe UI",Arial,sans-serif;background:linear-gradient(120deg,#eef3f9,#f8fbff); min-height: 100vh; position: relative;}

header{max-width:1200px;margin:12px auto 0;background:linear-gradient(90deg,#0b3c6d,#1e6fa8);border-radius:14px}
.header-wrap{display:flex;align-items:center;justify-content: space-between; padding:12px 20px}
.header-wrap img{height:110px}
.header-text{text-align:center;color:#fff; flex: 1;}
/* Railway Name Size Doubled */
.header-text h1{margin:0;font-size:56px;font-weight:800;line-height:1.1} 
.header-text h2{margin:2px 0;font-size:22px;font-weight:700}
.header-text h3{margin:2px 0;font-size:16px;font-weight:600;color:#ffffff}
.header-text h4{margin:0;font-size:14px;font-weight:500}

.container{max-width:1200px;margin:10px auto;padding:10px 16px 80px}
.card{background:#f4f8ff;padding:22px;border-radius:14px;box-shadow:0 10px 25px rgba(0,0,0,.12)}

h3{margin-top:0;color:#0b3c6d;font-size:22px}

/* Flexible Grid Layouts */
.row-date-journey { display: grid; grid-template-columns: 100px 120px 250px 250px 250px; gap: 15px; margin-bottom: 20px; }
.row-station-full { display: grid; grid-template-columns: 120px 250px 120px 250px; gap: 15px; margin-bottom: 20px; }
.row-train-full { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; margin-bottom: 20px; }
.row-crew-full { display: grid; grid-template-columns: 120px 2.5fr 1.5fr 2.5fr; gap: 15px; margin-bottom: 20px; }
.row-upload { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }

label{font-weight:800;color:#1f2937;font-size:13px; display: block; margin-bottom: 5px;}
input,select{width:100%;padding:10px 12px;border-radius:8px;border:2px solid #cbd5e1;font-size:14px;font-weight:700;background:#ffffff;box-sizing: border-box;}
input[disabled]{font-weight:800;color:#111827;background:#eef4ff}

.upload-received{border-color:#16a34a !important;background:#dcfce7 !important}
button{margin-top:10px;padding:14px 40px;background:linear-gradient(90deg,#2563eb,#1e40af);color:#fff;border:none;border-radius:30px;font-size:16px;font-weight:800;cursor:pointer}
small{color:#374151;font-weight:600; display: block; margin-top: 4px;}

.watermark {
    position: fixed;
    bottom: 10px;
    right: 20px;
    font-size: 11px;
    color: #d1d5db; 
    font-weight: 700;
    pointer-events: none;
    opacity: 0.4;
}
</style>
</head>

<body>
<header>
  <div class="header-wrap">
    <img src="masters/IR_LOGO.png" alt="IR Logo"> <div class="header-text">
      <h1>South East Central Railway</h1>
      <h2>Raipur Division</h2>
      <h3>Electrical (OP) Department</h3>
      <h4>TELOC Cell</h4>
    </div>
    <img src="masters/loco.png" alt="Loco Logo"> </div>
</header>

<div class="container">
  <div class="card">
    <h3>CLI Input Form</h3>

    <div class="row-date-journey">
      <div><label>Date</label><input type="date" id="today"></div>
      <div><label>CLI ID</label><input id="cli_id" placeholder="R0045"></div>
      <div><label>CLI Name</label><input id="cli_name" disabled></div>
      <div><label>Journey From</label><input type="datetime-local" id="journey_from"></div>
      <div><label>Journey To</label><input type="datetime-local" id="journey_to"></div>
    </div>

    <div class="row-station-full">
      <div><label>From Code</label><input id="from_code"></div>
      <div><label>From Station Name</label><input id="from_name" disabled></div>
      <div><label>To Code</label><input id="to_code"></div>
      <div><label>To Station Name</label><input id="to_name" disabled></div>
    </div>

    <div class="row-train-full">
      <div><label>Train Name / Number</label><input id="train_no"></div>
      <div>
        <label>Train Type</label>
        <select id="train_type">
          <option value="">Select</option>
          <option>Goods</option><option>Coaching</option><option>Passenger</option><option>MEMU</option><option>VB</option>
        </select>
      </div>
      <div>
        <label>Train MPS</label>
        <select id="train_mps">
          <option value="">Select</option>
          <option>100</option><option>110</option><option>120</option><option>130</option>
        </select>
      </div>
    </div>

    <div class="row-crew-full">
      <div><label>LP ID</label><input id="lp_id"></div>
      <div><label>LP Name (Large)</label><input id="lp_name" disabled></div>
      <div><label>Designation</label><input id="lp_desg" disabled></div>
      <div><label>G_CLI (Large)</label><input id="lp_gcli" disabled></div>
    </div>

    <div class="row-crew-full">
      <div><label>ALP ID</label><input id="alp_id"></div>
      <div><label>ALP Name (Large)</label><input id="alp_name" disabled></div>
      <div><label>Designation</label><input id="alp_desg" disabled></div>
      <div><label>G_CLI (Large)</label><input id="alp_gcli" disabled></div>
    </div>

    <div class="row-upload">
      <div>
        <label>RTIS Data (CSV)</label>
        <input type="file" id="rtis_file" accept=".csv">
        <small id="rtis_status">Choose File</small>
      </div>
      <div style="text-align: right;">
        <div style="display: inline-block; text-align: left; width: 100%;">
            <label>Caution Order</label>
            <input type="file" id="caution_file" accept=".pdf,.jpg,.jpeg,.png,.csv">
            <small id="caution_status">Choose File</small>
        </div>
      </div>
    </div>

    <div style="text-align: center;">
        <button onclick="generateReport()">Generate Report</button>
    </div>

  </div>
</div>

<div class="watermark">CLI/TELOC-M LACHHWANI</div>

<script>
// Logic remains unchanged as requested
let cliMap={},stationMap={},crewMap={},mastersLoaded=false;
let rtisFile=null,cautionFile=null;

async function loadCSV(path){const r=await fetch(path);const t=await r.text();return t.trim().split(/\r?\n/).map(l=>l.split(',').map(c=>c.trim()))}

async function loadMasters(){
  try {
    (await loadCSV('masters/cli_master.csv')).slice(1).forEach(r=>{if(r[0])cliMap[r[0].toUpperCase()]=r[1]});
    (await loadCSV('masters/station_master.csv')).slice(1).forEach(r=>{if(r[0])stationMap[r[0].toUpperCase()]=r[1]});
    (await loadCSV('masters/crew_master.csv')).slice(1).forEach(r=>{if(r[0])crewMap[r[0].toUpperCase()]={name:r[1],desg:r[2],gcli:r[3]}});
    mastersLoaded=true;
  } catch(e) {}
}
loadMasters();

function waitForMasters(cb){mastersLoaded?cb():setTimeout(()=>waitForMasters(cb),100)}

cli_id.oninput=()=>waitForMasters(()=>cli_name.value=cliMap[cli_id.value.trim().toUpperCase()]||'');
from_code.oninput=()=>waitForMasters(()=>from_name.value=stationMap[from_code.value.trim().toUpperCase()]||'');
to_code.oninput=()=>waitForMasters(()=>to_name.value=stationMap[to_code.value.trim().toUpperCase()]||'');

lp_id.oninput=()=>waitForMasters(()=>{const d=crewMap[lp_id.value.trim().toUpperCase()];lp_name.value=d?d.name:'';lp_desg.value=d?d.desg:'';lp_gcli.value=d?d.gcli:''});
alp_id.oninput=()=>waitForMasters(()=>{const d=crewMap[alp_id.value.trim().toUpperCase()];alp_name.value=d?d.name:'';alp_desg.value=d?d.desg:'';alp_gcli.value=d?d.gcli:''});

document.addEventListener('DOMContentLoaded',()=>{
  today.value=new Date().toISOString().slice(0,10);
  const now=new Date().toISOString().slice(0,16);
  journey_from.max=now;journey_to.max=now;
  journey_from.addEventListener('change',()=>{ journey_to.min = journey_from.value; });
});

rtis_file.onchange=e=>{rtisFile=e.target.files[0]||null;if(rtisFile){rtis_file.classList.add('upload-received');rtis_status.textContent='Received'}};
caution_file.onchange=e=>{cautionFile=e.target.files[0]||null;if(cautionFile){caution_file.classList.add('upload-received');caution_status.textContent='Received'}};

function generateReport(){if(!rtisFile||!cautionFile){alert('RTIS Data aur Caution Order dono upload karna mandatory hai');return}alert('Final inputs OK.')}
</script>
</body>
</html>
